{"ast":null,"code":"import React,{useState,useCallback,useEffect}from'react';import PixelCanvas from'../components/PixelCanvas';import Toolbar from'../components/Toolbar';import ColorPicker from'../components/ColorPicker';import CanvasSettings from'../components/CanvasSettings';import{DEFAULT_SETTINGS}from'../data/mock';import{Gamepad2,Sparkles,Menu}from'lucide-react';import{Button}from'../components/ui/button';import{Sheet,SheetContent,SheetTrigger}from'../components/ui/sheet';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PixelArtEditor=()=>{const[canvasWidth,setCanvasWidth]=useState(DEFAULT_SETTINGS.canvasWidth);const[canvasHeight,setCanvasHeight]=useState(DEFAULT_SETTINGS.canvasHeight);const[pixels,setPixels]=useState(()=>Array(DEFAULT_SETTINGS.canvasHeight).fill(null).map(()=>Array(DEFAULT_SETTINGS.canvasWidth).fill('transparent')));const[currentColor,setCurrentColor]=useState(DEFAULT_SETTINGS.currentColor);const[backgroundColor,setBackgroundColor]=useState(DEFAULT_SETTINGS.backgroundColor);const[currentTool,setCurrentTool]=useState('pencil');const[zoom,setZoom]=useState(DEFAULT_SETTINGS.zoomLevel);const[gridEnabled,setGridEnabled]=useState(DEFAULT_SETTINGS.gridEnabled);const[recentColors,setRecentColors]=useState([]);const[history,setHistory]=useState([]);const[historyIndex,setHistoryIndex]=useState(-1);const[isMobile,setIsMobile]=useState(false);const[mobileDrawerOpen,setMobileDrawerOpen]=useState(false);// Check for mobile viewport\nuseEffect(()=>{const checkMobile=()=>{setIsMobile(window.innerWidth<1024);};checkMobile();window.addEventListener('resize',checkMobile);return()=>window.removeEventListener('resize',checkMobile);},[]);// Initialize history\nuseEffect(()=>{const initialPixels=Array(canvasHeight).fill(null).map(()=>Array(canvasWidth).fill('transparent'));setHistory([initialPixels]);setHistoryIndex(0);},[]);const handleSizeChange=(width,height)=>{setCanvasWidth(width);setCanvasHeight(height);const newPixels=Array(height).fill(null).map(()=>Array(width).fill('transparent'));setPixels(newPixels);setHistory([newPixels]);setHistoryIndex(0);};const handlePixelsChange=useCallback(newPixels=>{setPixels(newPixels);const newHistory=history.slice(0,historyIndex+1);newHistory.push(newPixels);if(newHistory.length>50)newHistory.shift();setHistory(newHistory);setHistoryIndex(newHistory.length-1);},[history,historyIndex]);const handleUndo=useCallback(()=>{if(historyIndex>0){setHistoryIndex(historyIndex-1);setPixels(history[historyIndex-1]);}},[history,historyIndex]);const handleRedo=useCallback(()=>{if(historyIndex<history.length-1){setHistoryIndex(historyIndex+1);setPixels(history[historyIndex+1]);}},[history,historyIndex]);const handleClear=()=>{const newPixels=Array(canvasHeight).fill(null).map(()=>Array(canvasWidth).fill('transparent'));handlePixelsChange(newPixels);};const handleExport=()=>{const canvas=document.createElement('canvas');canvas.width=canvasWidth;canvas.height=canvasHeight;const ctx=canvas.getContext('2d');// Handle transparent background - don't fill anything, canvas is transparent by default\nif(backgroundColor!=='transparent'){ctx.fillStyle=backgroundColor;ctx.fillRect(0,0,canvasWidth,canvasHeight);}// Draw pixels\nfor(let y=0;y<canvasHeight;y++){for(let x=0;x<canvasWidth;x++){var _pixels$y;const color=(_pixels$y=pixels[y])===null||_pixels$y===void 0?void 0:_pixels$y[x];if(color&&color!=='transparent'){ctx.fillStyle=color;ctx.fillRect(x,y,1,1);}}}const link=document.createElement('a');link.download=\"pixel-art-\".concat(Date.now(),\".png\");link.href=canvas.toDataURL('image/png');link.click();};const handleAddRecentColor=color=>{setRecentColors(prev=>{const filtered=prev.filter(c=>c!==color);return[color,...filtered].slice(0,12);});};const handleColorPick=color=>{setCurrentColor(color);handleAddRecentColor(color);setCurrentTool('pencil');};// Keyboard shortcuts\nuseEffect(()=>{const handleKeyDown=e=>{if(e.target.tagName==='INPUT')return;const key=e.key.toLowerCase();if(key==='p')setCurrentTool('pencil');else if(key==='e')setCurrentTool('eraser');else if(key==='f')setCurrentTool('fill');else if(key==='i')setCurrentTool('eyedropper');else if(key==='l')setCurrentTool('line');else if(key==='r')setCurrentTool('rectangle');else if(key==='c')setCurrentTool('circle');else if(key==='z'&&(e.ctrlKey||e.metaKey)&&!e.shiftKey){e.preventDefault();handleUndo();}else if(key==='z'&&(e.ctrlKey||e.metaKey)&&e.shiftKey||key==='y'&&(e.ctrlKey||e.metaKey)){e.preventDefault();handleRedo();}};window.addEventListener('keydown',handleKeyDown);return()=>window.removeEventListener('keydown',handleKeyDown);},[handleUndo,handleRedo]);// Mobile Layout\nif(isMobile){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-950 text-gray-100 flex flex-col\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"sticky top-0 z-20 border-b border-gray-800 bg-gray-900/95 backdrop-blur-md px-3 py-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-1.5 bg-gradient-to-br from-emerald-500 to-cyan-500 rounded-lg\",children:/*#__PURE__*/_jsx(Gamepad2,{className:\"w-5 h-5 text-gray-900\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent font-mono\",children:\"PIXEL FORGE\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 font-mono\",children:[canvasWidth,\"x\",canvasHeight]}),/*#__PURE__*/_jsxs(Sheet,{open:mobileDrawerOpen,onOpenChange:setMobileDrawerOpen,children:[/*#__PURE__*/_jsx(SheetTrigger,{asChild:true,children:/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"icon\",className:\"text-gray-300\",children:/*#__PURE__*/_jsx(Menu,{className:\"w-5 h-5\"})})}),/*#__PURE__*/_jsx(SheetContent,{side:\"right\",className:\"w-[300px] bg-gray-900 border-gray-700 p-0 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between border-b border-gray-700 pb-3\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold text-emerald-400 font-mono\",children:\"Settings\"})}),/*#__PURE__*/_jsx(ColorPicker,{currentColor:currentColor,onColorChange:setCurrentColor,recentColors:recentColors,onAddRecentColor:handleAddRecentColor,isMobile:true}),/*#__PURE__*/_jsx(CanvasSettings,{canvasWidth:canvasWidth,canvasHeight:canvasHeight,onSizeChange:handleSizeChange,gridEnabled:gridEnabled,onGridToggle:setGridEnabled,zoom:zoom,onZoomChange:setZoom,onClear:handleClear,onExport:handleExport,backgroundColor:backgroundColor,onBackgroundChange:setBackgroundColor,isMobile:true})]})})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"sticky top-[53px] z-10 bg-gray-900/95 backdrop-blur-md border-b border-gray-800 px-2 py-2\",children:/*#__PURE__*/_jsx(Toolbar,{currentTool:currentTool,onToolChange:setCurrentTool,isMobile:true})}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 overflow-auto p-3 flex items-start justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto max-w-full\",children:/*#__PURE__*/_jsx(PixelCanvas,{width:canvasWidth,height:canvasHeight,pixels:pixels,setPixels:handlePixelsChange,currentColor:currentColor,tool:currentTool,zoom:zoom,gridEnabled:gridEnabled,backgroundColor:backgroundColor,onColorPick:handleColorPick})})}),/*#__PURE__*/_jsx(\"div\",{className:\"sticky bottom-0 z-10 bg-gray-900/95 backdrop-blur-md border-t border-gray-800 px-3 py-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg border-2 border-gray-600\",style:{backgroundColor:currentColor}}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:currentColor,onChange:e=>{setCurrentColor(e.target.value.toUpperCase());handleAddRecentColor(e.target.value.toUpperCase());},className:\"w-10 h-10 rounded cursor-pointer bg-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",onClick:()=>{const levels=[4,8,12,16,24,32];const idx=levels.indexOf(zoom);if(idx>0)setZoom(levels[idx-1]);},className:\"h-8 px-2 border-gray-600 text-gray-300\",children:\"-\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-mono text-emerald-400 w-12 text-center\",children:[zoom,\"x\"]}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",onClick:()=>{const levels=[4,8,12,16,24,32];const idx=levels.indexOf(zoom);if(idx<levels.length-1)setZoom(levels[idx+1]);},className:\"h-8 px-2 border-gray-600 text-gray-300\",children:\"+\"})]}),/*#__PURE__*/_jsx(Button,{onClick:handleExport,size:\"sm\",className:\"bg-emerald-600 hover:bg-emerald-500 text-white\",children:\"Export\"})]})})]});}// Desktop Layout\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-950 text-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 overflow-hidden pointer-events-none\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-1/4 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse\",style:{animationDelay:'1s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/2 left-1/2 w-64 h-64 bg-cyan-500/10 rounded-full blur-3xl animate-pulse\",style:{animationDelay:'2s'}})]}),/*#__PURE__*/_jsx(\"header\",{className:\"relative z-10 border-b border-gray-800 bg-gray-900/80 backdrop-blur-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-gradient-to-br from-emerald-500 to-cyan-500 rounded-lg shadow-[0_0_20px_rgba(16,185,129,0.4)]\",children:/*#__PURE__*/_jsx(Gamepad2,{className:\"w-6 h-6 text-gray-900\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold bg-gradient-to-r from-emerald-400 via-cyan-400 to-purple-400 bg-clip-text text-transparent font-mono\",children:\"PIXEL FORGE\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 font-mono\",children:\"Create \\u2022 Design \\u2022 Export\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 px-3 py-1.5 bg-gray-800 rounded-lg border border-gray-700\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-4 h-4 text-emerald-400\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-400 font-mono\",children:[canvasWidth,\"x\",canvasHeight,\"px\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 font-mono\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-emerald-400\",children:\"Ctrl+Z\"}),\" Undo \\xA0\",/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-400\",children:\"Ctrl+Y\"}),\" Redo\"]})]})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"relative z-10 max-w-7xl mx-auto px-4 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-6\",children:[/*#__PURE__*/_jsx(\"aside\",{className:\"w-20 flex-shrink-0\",children:/*#__PURE__*/_jsx(Toolbar,{currentTool:currentTool,onToolChange:setCurrentTool})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-start justify-center overflow-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto max-w-full p-4 bg-gray-900/50 rounded-2xl border border-gray-800\",children:/*#__PURE__*/_jsx(PixelCanvas,{width:canvasWidth,height:canvasHeight,pixels:pixels,setPixels:handlePixelsChange,currentColor:currentColor,tool:currentTool,zoom:zoom,gridEnabled:gridEnabled,backgroundColor:backgroundColor,onColorPick:handleColorPick})})}),/*#__PURE__*/_jsxs(\"aside\",{className:\"w-72 flex-shrink-0 space-y-4\",children:[/*#__PURE__*/_jsx(ColorPicker,{currentColor:currentColor,onColorChange:setCurrentColor,recentColors:recentColors,onAddRecentColor:handleAddRecentColor}),/*#__PURE__*/_jsx(CanvasSettings,{canvasWidth:canvasWidth,canvasHeight:canvasHeight,onSizeChange:handleSizeChange,gridEnabled:gridEnabled,onGridToggle:setGridEnabled,zoom:zoom,onZoomChange:setZoom,onClear:handleClear,onExport:handleExport,backgroundColor:backgroundColor,onBackgroundChange:setBackgroundColor})]})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"relative z-10 border-t border-gray-800 bg-gray-900/60 backdrop-blur-sm mt-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center justify-center gap-6 text-xs text-gray-500 font-mono\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Use keyboard shortcuts for faster workflow\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"kbd\",{className:\"px-2 py-1 bg-gray-800 rounded text-emerald-400\",children:\"P\"}),\" Pencil\",/*#__PURE__*/_jsx(\"kbd\",{className:\"px-2 py-1 bg-gray-800 rounded text-cyan-400\",children:\"E\"}),\" Eraser\",/*#__PURE__*/_jsx(\"kbd\",{className:\"px-2 py-1 bg-gray-800 rounded text-purple-400\",children:\"F\"}),\" Fill\"]})]})})})]});};export default PixelArtEditor;","map":{"version":3,"names":["React","useState","useCallback","useEffect","PixelCanvas","Toolbar","ColorPicker","CanvasSettings","DEFAULT_SETTINGS","Gamepad2","Sparkles","Menu","Button","Sheet","SheetContent","SheetTrigger","jsx","_jsx","jsxs","_jsxs","PixelArtEditor","canvasWidth","setCanvasWidth","canvasHeight","setCanvasHeight","pixels","setPixels","Array","fill","map","currentColor","setCurrentColor","backgroundColor","setBackgroundColor","currentTool","setCurrentTool","zoom","setZoom","zoomLevel","gridEnabled","setGridEnabled","recentColors","setRecentColors","history","setHistory","historyIndex","setHistoryIndex","isMobile","setIsMobile","mobileDrawerOpen","setMobileDrawerOpen","checkMobile","window","innerWidth","addEventListener","removeEventListener","initialPixels","handleSizeChange","width","height","newPixels","handlePixelsChange","newHistory","slice","push","length","shift","handleUndo","handleRedo","handleClear","handleExport","canvas","document","createElement","ctx","getContext","fillStyle","fillRect","y","x","_pixels$y","color","link","download","concat","Date","now","href","toDataURL","click","handleAddRecentColor","prev","filtered","filter","c","handleColorPick","handleKeyDown","e","target","tagName","key","toLowerCase","ctrlKey","metaKey","shiftKey","preventDefault","className","children","open","onOpenChange","asChild","variant","size","side","onColorChange","onAddRecentColor","onSizeChange","onGridToggle","onZoomChange","onClear","onExport","onBackgroundChange","onToolChange","tool","onColorPick","style","type","value","onChange","toUpperCase","onClick","levels","idx","indexOf","animationDelay"],"sources":["/workspaces/pixel-app-react/pixel app/frontend/src/pages/PixelArtEditor.jsx"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport PixelCanvas from '../components/PixelCanvas';\nimport Toolbar from '../components/Toolbar';\nimport ColorPicker from '../components/ColorPicker';\nimport CanvasSettings from '../components/CanvasSettings';\nimport { DEFAULT_SETTINGS } from '../data/mock';\nimport { Gamepad2, Sparkles, Menu } from 'lucide-react';\nimport { Button } from '../components/ui/button';\nimport { Sheet, SheetContent, SheetTrigger } from '../components/ui/sheet';\n\nconst PixelArtEditor = () => {\n  const [canvasWidth, setCanvasWidth] = useState(DEFAULT_SETTINGS.canvasWidth);\n  const [canvasHeight, setCanvasHeight] = useState(DEFAULT_SETTINGS.canvasHeight);\n  const [pixels, setPixels] = useState(() =>\n    Array(DEFAULT_SETTINGS.canvasHeight).fill(null).map(() =>\n      Array(DEFAULT_SETTINGS.canvasWidth).fill('transparent')\n    )\n  );\n  const [currentColor, setCurrentColor] = useState(DEFAULT_SETTINGS.currentColor);\n  const [backgroundColor, setBackgroundColor] = useState(DEFAULT_SETTINGS.backgroundColor);\n  const [currentTool, setCurrentTool] = useState('pencil');\n  const [zoom, setZoom] = useState(DEFAULT_SETTINGS.zoomLevel);\n  const [gridEnabled, setGridEnabled] = useState(DEFAULT_SETTINGS.gridEnabled);\n  const [recentColors, setRecentColors] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [isMobile, setIsMobile] = useState(false);\n  const [mobileDrawerOpen, setMobileDrawerOpen] = useState(false);\n\n  // Check for mobile viewport\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 1024);\n    };\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Initialize history\n  useEffect(() => {\n    const initialPixels = Array(canvasHeight).fill(null).map(() =>\n      Array(canvasWidth).fill('transparent')\n    );\n    setHistory([initialPixels]);\n    setHistoryIndex(0);\n  }, []);\n\n  const handleSizeChange = (width, height) => {\n    setCanvasWidth(width);\n    setCanvasHeight(height);\n    const newPixels = Array(height).fill(null).map(() =>\n      Array(width).fill('transparent')\n    );\n    setPixels(newPixels);\n    setHistory([newPixels]);\n    setHistoryIndex(0);\n  };\n\n  const handlePixelsChange = useCallback((newPixels) => {\n    setPixels(newPixels);\n    const newHistory = history.slice(0, historyIndex + 1);\n    newHistory.push(newPixels);\n    if (newHistory.length > 50) newHistory.shift();\n    setHistory(newHistory);\n    setHistoryIndex(newHistory.length - 1);\n  }, [history, historyIndex]);\n\n  const handleUndo = useCallback(() => {\n    if (historyIndex > 0) {\n      setHistoryIndex(historyIndex - 1);\n      setPixels(history[historyIndex - 1]);\n    }\n  }, [history, historyIndex]);\n\n  const handleRedo = useCallback(() => {\n    if (historyIndex < history.length - 1) {\n      setHistoryIndex(historyIndex + 1);\n      setPixels(history[historyIndex + 1]);\n    }\n  }, [history, historyIndex]);\n\n  const handleClear = () => {\n    const newPixels = Array(canvasHeight).fill(null).map(() =>\n      Array(canvasWidth).fill('transparent')\n    );\n    handlePixelsChange(newPixels);\n  };\n\n  const handleExport = () => {\n    const canvas = document.createElement('canvas');\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n    const ctx = canvas.getContext('2d');\n\n    // Handle transparent background - don't fill anything, canvas is transparent by default\n    if (backgroundColor !== 'transparent') {\n      ctx.fillStyle = backgroundColor;\n      ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    }\n\n    // Draw pixels\n    for (let y = 0; y < canvasHeight; y++) {\n      for (let x = 0; x < canvasWidth; x++) {\n        const color = pixels[y]?.[x];\n        if (color && color !== 'transparent') {\n          ctx.fillStyle = color;\n          ctx.fillRect(x, y, 1, 1);\n        }\n      }\n    }\n\n    const link = document.createElement('a');\n    link.download = `pixel-art-${Date.now()}.png`;\n    link.href = canvas.toDataURL('image/png');\n    link.click();\n  };\n\n  const handleAddRecentColor = (color) => {\n    setRecentColors(prev => {\n      const filtered = prev.filter(c => c !== color);\n      return [color, ...filtered].slice(0, 12);\n    });\n  };\n\n  const handleColorPick = (color) => {\n    setCurrentColor(color);\n    handleAddRecentColor(color);\n    setCurrentTool('pencil');\n  };\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.target.tagName === 'INPUT') return;\n      \n      const key = e.key.toLowerCase();\n      if (key === 'p') setCurrentTool('pencil');\n      else if (key === 'e') setCurrentTool('eraser');\n      else if (key === 'f') setCurrentTool('fill');\n      else if (key === 'i') setCurrentTool('eyedropper');\n      else if (key === 'l') setCurrentTool('line');\n      else if (key === 'r') setCurrentTool('rectangle');\n      else if (key === 'c') setCurrentTool('circle');\n      else if (key === 'z' && (e.ctrlKey || e.metaKey) && !e.shiftKey) {\n        e.preventDefault();\n        handleUndo();\n      }\n      else if ((key === 'z' && (e.ctrlKey || e.metaKey) && e.shiftKey) ||\n               (key === 'y' && (e.ctrlKey || e.metaKey))) {\n        e.preventDefault();\n        handleRedo();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [handleUndo, handleRedo]);\n\n  // Mobile Layout\n  if (isMobile) {\n    return (\n      <div className=\"min-h-screen bg-gray-950 text-gray-100 flex flex-col\">\n        {/* Mobile Header */}\n        <header className=\"sticky top-0 z-20 border-b border-gray-800 bg-gray-900/95 backdrop-blur-md px-3 py-2\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"p-1.5 bg-gradient-to-br from-emerald-500 to-cyan-500 rounded-lg\">\n                <Gamepad2 className=\"w-5 h-5 text-gray-900\" />\n              </div>\n              <h1 className=\"text-lg font-bold bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent font-mono\">\n                PIXEL FORGE\n              </h1>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-xs text-gray-500 font-mono\">{canvasWidth}x{canvasHeight}</span>\n              <Sheet open={mobileDrawerOpen} onOpenChange={setMobileDrawerOpen}>\n                <SheetTrigger asChild>\n                  <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-300\">\n                    <Menu className=\"w-5 h-5\" />\n                  </Button>\n                </SheetTrigger>\n                <SheetContent side=\"right\" className=\"w-[300px] bg-gray-900 border-gray-700 p-0 overflow-y-auto\">\n                  <div className=\"p-4 space-y-4\">\n                    <div className=\"flex items-center justify-between border-b border-gray-700 pb-3\">\n                      <h2 className=\"text-lg font-bold text-emerald-400 font-mono\">Settings</h2>\n                    </div>\n                    <ColorPicker\n                      currentColor={currentColor}\n                      onColorChange={setCurrentColor}\n                      recentColors={recentColors}\n                      onAddRecentColor={handleAddRecentColor}\n                      isMobile={true}\n                    />\n                    <CanvasSettings\n                      canvasWidth={canvasWidth}\n                      canvasHeight={canvasHeight}\n                      onSizeChange={handleSizeChange}\n                      gridEnabled={gridEnabled}\n                      onGridToggle={setGridEnabled}\n                      zoom={zoom}\n                      onZoomChange={setZoom}\n                      onClear={handleClear}\n                      onExport={handleExport}\n                      backgroundColor={backgroundColor}\n                      onBackgroundChange={setBackgroundColor}\n                      isMobile={true}\n                    />\n                  </div>\n                </SheetContent>\n              </Sheet>\n            </div>\n          </div>\n        </header>\n\n        {/* Mobile Tools Bar */}\n        <div className=\"sticky top-[53px] z-10 bg-gray-900/95 backdrop-blur-md border-b border-gray-800 px-2 py-2\">\n          <Toolbar currentTool={currentTool} onToolChange={setCurrentTool} isMobile={true} />\n        </div>\n\n        {/* Canvas Area */}\n        <main className=\"flex-1 overflow-auto p-3 flex items-start justify-center\">\n          <div className=\"overflow-auto max-w-full\">\n            <PixelCanvas\n              width={canvasWidth}\n              height={canvasHeight}\n              pixels={pixels}\n              setPixels={handlePixelsChange}\n              currentColor={currentColor}\n              tool={currentTool}\n              zoom={zoom}\n              gridEnabled={gridEnabled}\n              backgroundColor={backgroundColor}\n              onColorPick={handleColorPick}\n            />\n          </div>\n        </main>\n\n        {/* Mobile Bottom Bar - Quick Color & Zoom */}\n        <div className=\"sticky bottom-0 z-10 bg-gray-900/95 backdrop-blur-md border-t border-gray-800 px-3 py-2\">\n          <div className=\"flex items-center justify-between gap-3\">\n            {/* Current Color */}\n            <div className=\"flex items-center gap-2\">\n              <div\n                className=\"w-10 h-10 rounded-lg border-2 border-gray-600\"\n                style={{ backgroundColor: currentColor }}\n              />\n              <input\n                type=\"color\"\n                value={currentColor}\n                onChange={(e) => {\n                  setCurrentColor(e.target.value.toUpperCase());\n                  handleAddRecentColor(e.target.value.toUpperCase());\n                }}\n                className=\"w-10 h-10 rounded cursor-pointer bg-transparent\"\n              />\n            </div>\n            \n            {/* Zoom Controls */}\n            <div className=\"flex items-center gap-1\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => {\n                  const levels = [4, 8, 12, 16, 24, 32];\n                  const idx = levels.indexOf(zoom);\n                  if (idx > 0) setZoom(levels[idx - 1]);\n                }}\n                className=\"h-8 px-2 border-gray-600 text-gray-300\"\n              >\n                -\n              </Button>\n              <span className=\"text-sm font-mono text-emerald-400 w-12 text-center\">{zoom}x</span>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => {\n                  const levels = [4, 8, 12, 16, 24, 32];\n                  const idx = levels.indexOf(zoom);\n                  if (idx < levels.length - 1) setZoom(levels[idx + 1]);\n                }}\n                className=\"h-8 px-2 border-gray-600 text-gray-300\"\n              >\n                +\n              </Button>\n            </div>\n\n            {/* Export Button */}\n            <Button\n              onClick={handleExport}\n              size=\"sm\"\n              className=\"bg-emerald-600 hover:bg-emerald-500 text-white\"\n            >\n              Export\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Desktop Layout\n  return (\n    <div className=\"min-h-screen bg-gray-950 text-gray-100\">\n      {/* Animated Background */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse\" />\n        <div className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse\" style={{ animationDelay: '1s' }} />\n        <div className=\"absolute top-1/2 left-1/2 w-64 h-64 bg-cyan-500/10 rounded-full blur-3xl animate-pulse\" style={{ animationDelay: '2s' }} />\n      </div>\n\n      {/* Header */}\n      <header className=\"relative z-10 border-b border-gray-800 bg-gray-900/80 backdrop-blur-md\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-gradient-to-br from-emerald-500 to-cyan-500 rounded-lg shadow-[0_0_20px_rgba(16,185,129,0.4)]\">\n                <Gamepad2 className=\"w-6 h-6 text-gray-900\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold bg-gradient-to-r from-emerald-400 via-cyan-400 to-purple-400 bg-clip-text text-transparent font-mono\">\n                  PIXEL FORGE\n                </h1>\n                <p className=\"text-xs text-gray-500 font-mono\">Create • Design • Export</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-800 rounded-lg border border-gray-700\">\n                <Sparkles className=\"w-4 h-4 text-emerald-400\" />\n                <span className=\"text-sm text-gray-400 font-mono\">\n                  {canvasWidth}x{canvasHeight}px\n                </span>\n              </div>\n              <div className=\"text-xs text-gray-500 font-mono\">\n                <span className=\"text-emerald-400\">Ctrl+Z</span> Undo &nbsp;\n                <span className=\"text-cyan-400\">Ctrl+Y</span> Redo\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"relative z-10 max-w-7xl mx-auto px-4 py-6\">\n        <div className=\"flex gap-6\">\n          {/* Left Sidebar - Tools */}\n          <aside className=\"w-20 flex-shrink-0\">\n            <Toolbar currentTool={currentTool} onToolChange={setCurrentTool} />\n          </aside>\n\n          {/* Center - Canvas */}\n          <div className=\"flex-1 flex items-start justify-center overflow-auto\">\n            <div className=\"overflow-auto max-w-full p-4 bg-gray-900/50 rounded-2xl border border-gray-800\">\n              <PixelCanvas\n                width={canvasWidth}\n                height={canvasHeight}\n                pixels={pixels}\n                setPixels={handlePixelsChange}\n                currentColor={currentColor}\n                tool={currentTool}\n                zoom={zoom}\n                gridEnabled={gridEnabled}\n                backgroundColor={backgroundColor}\n                onColorPick={handleColorPick}\n              />\n            </div>\n          </div>\n\n          {/* Right Sidebar - Settings */}\n          <aside className=\"w-72 flex-shrink-0 space-y-4\">\n            <ColorPicker\n              currentColor={currentColor}\n              onColorChange={setCurrentColor}\n              recentColors={recentColors}\n              onAddRecentColor={handleAddRecentColor}\n            />\n            <CanvasSettings\n              canvasWidth={canvasWidth}\n              canvasHeight={canvasHeight}\n              onSizeChange={handleSizeChange}\n              gridEnabled={gridEnabled}\n              onGridToggle={setGridEnabled}\n              zoom={zoom}\n              onZoomChange={setZoom}\n              onClear={handleClear}\n              onExport={handleExport}\n              backgroundColor={backgroundColor}\n              onBackgroundChange={setBackgroundColor}\n            />\n          </aside>\n        </div>\n      </main>\n\n      {/* Footer */}\n      <footer className=\"relative z-10 border-t border-gray-800 bg-gray-900/60 backdrop-blur-sm mt-8\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4\">\n          <div className=\"flex flex-wrap items-center justify-center gap-6 text-xs text-gray-500 font-mono\">\n            <span>Use keyboard shortcuts for faster workflow</span>\n            <span>•</span>\n            <span className=\"flex gap-4\">\n              <kbd className=\"px-2 py-1 bg-gray-800 rounded text-emerald-400\">P</kbd> Pencil\n              <kbd className=\"px-2 py-1 bg-gray-800 rounded text-cyan-400\">E</kbd> Eraser\n              <kbd className=\"px-2 py-1 bg-gray-800 rounded text-purple-400\">F</kbd> Fill\n            </span>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n};\n\nexport default PixelArtEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}